import{r as f,g as Et,R as Ye,j as o,c as St}from"./client-C3Mcq2Xm.js";import{D as ge,s as _,g as jt,o as Lt}from"./storage-qYjcKSCH.js";const Nt={},ze=e=>{let t;const r=new Set,n=(g,p)=>{const w=typeof g=="function"?g(t):g;if(!Object.is(w,t)){const v=t;t=p??(typeof w!="object"||w===null)?w:Object.assign({},t,w),r.forEach(y=>y(t,v))}},i=()=>t,u={setState:n,getState:i,getInitialState:()=>d,subscribe:g=>(r.add(g),()=>r.delete(g)),destroy:()=>{(Nt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(n,i,u);return u},Tt=e=>e?ze(e):ze;var Xe={exports:{}},Ge={},qe={exports:{}},Je={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U=f;function Rt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:Rt,Mt=U.useState,It=U.useEffect,Dt=U.useLayoutEffect,Ft=U.useDebugValue;function zt(e,t){var r=t(),n=Mt({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return Dt(function(){i.value=r,i.getSnapshot=t,we(i)&&a({inst:i})},[e,r,t]),It(function(){return we(i)&&a({inst:i}),e(function(){we(i)&&a({inst:i})})},[e]),Ft(r),r}function we(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!At(e,r)}catch{return!0}}function _t(e,t){return t()}var $t=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_t:zt;Je.useSyncExternalStore=U.useSyncExternalStore!==void 0?U.useSyncExternalStore:$t;qe.exports=Je;var Ot=qe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue=f,Ht=Ot;function Pt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bt=typeof Object.is=="function"?Object.is:Pt,Wt=Ht.useSyncExternalStore,Vt=ue.useRef,Ut=ue.useEffect,Yt=ue.useMemo,Xt=ue.useDebugValue;Ge.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=Vt(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=Yt(function(){function u(v){if(!d){if(d=!0,g=v,v=n(v),i!==void 0&&s.hasValue){var y=s.value;if(i(y,v))return p=y}return p=v}if(y=p,Bt(g,v))return y;var N=n(v);return i!==void 0&&i(y,N)?(g=v,y):(g=v,p=N)}var d=!1,g,p,w=r===void 0?null:r;return[function(){return u(t())},w===null?void 0:function(){return u(w())}]},[t,r,n,i]);var l=Wt(e,a[0],a[1]);return Ut(function(){s.hasValue=!0,s.value=l},[l]),Xt(l),l};Xe.exports=Ge;var Gt=Xe.exports;const qt=Et(Gt),Ke={},{useDebugValue:Jt}=Ye,{useSyncExternalStoreWithSelector:Kt}=qt;let _e=!1;const Zt=e=>e;function Qt(e,t=Zt,r){(Ke?"production":void 0)!=="production"&&r&&!_e&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),_e=!0);const n=Kt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Jt(n),n}const $e=e=>{(Ke?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Tt(e):e,r=(n,i)=>Qt(t,n,i);return Object.assign(r,t),r},er=e=>e?$e(e):$e,O=er((e,t)=>({settings:ge,isLoading:!0,initialize:async()=>{const r=await jt();e({settings:r,isLoading:!1}),Lt(n=>{e({settings:n})})},updateSettings:r=>{const n={...t().settings,...r};e({settings:n}),_(n)},updateTypography:r=>{const n={...t().settings,typography:{...t().settings.typography,...r}};e({settings:n}),_(n)},updateVisualAids:r=>{const n=t().settings.visualAids,i={...n};r.readingRuler&&(i.readingRuler={...n.readingRuler,...r.readingRuler}),r.screenTint&&(i.screenTint={...n.screenTint,...r.screenTint}),r.focusMode&&(i.focusMode={...n.focusMode,...r.focusMode}),r.handConductor&&(i.handConductor={...n.handConductor,...r.handConductor}),r.handFocus&&(i.handFocus={...n.handFocus,...r.handFocus});const a={...t().settings,visualAids:i};e({settings:a}),_(a)},updateCognitive:r=>{const n=t().settings.cognitive,i={...n};r.bionicReading&&(i.bionicReading={...n.bionicReading,...r.bionicReading}),r.syllableSplitter&&(i.syllableSplitter={...n.syllableSplitter,...r.syllableSplitter});const a={...t().settings,cognitive:i};e({settings:a}),_(a)},updateAudio:r=>{const n={...t().settings,audio:{...t().settings.audio,...r}};e({settings:n}),_(n)},toggleExtension:()=>{const r={...t().settings,enabled:!t().settings.enabled};e({settings:r}),_(r)},resetToDefaults:()=>{e({settings:ge}),_(ge)}})),j=({label:e,value:t,min:r,max:n,step:i=1,unit:a="",onChange:s,disabled:l=!1})=>{const u=(t-r)/(n-r)*100;return o.jsxs("div",{className:`flex flex-col gap-2 ${l?"opacity-50":""}`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{className:"text-sm font-medium text-white/90",children:e}),o.jsxs("span",{className:"text-sm text-primary-400 font-mono bg-surface-800/50 px-2 py-0.5 rounded",children:[t,a]})]}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"range",min:r,max:n,step:i,value:t,onChange:d=>s(parseFloat(d.target.value)),disabled:l,className:`w-full h-2 bg-surface-700 rounded-lg appearance-none cursor-pointer
                     [&::-webkit-slider-thumb]:appearance-none
                     [&::-webkit-slider-thumb]:w-4
                     [&::-webkit-slider-thumb]:h-4
                     [&::-webkit-slider-thumb]:rounded-full
                     [&::-webkit-slider-thumb]:bg-primary-500
                     [&::-webkit-slider-thumb]:shadow-lg
                     [&::-webkit-slider-thumb]:shadow-primary-500/30
                     [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:transition-transform
                     [&::-webkit-slider-thumb]:hover:scale-110
                     disabled:cursor-not-allowed`,style:{background:`linear-gradient(to right, rgb(14 165 233) 0%, rgb(14 165 233) ${u}%, rgb(63 63 70) ${u}%, rgb(63 63 70) 100%)`}})})]})},I=({label:e,description:t,checked:r,onChange:n,disabled:i=!1})=>o.jsxs("div",{className:`flex items-center justify-between gap-3 p-3 rounded-lg bg-surface-800/30 
                  hover:bg-surface-800/50 transition-colors cursor-pointer
                  ${i?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!i&&n(!r),children:[o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx("span",{className:"text-sm font-medium text-white/90",children:e}),t&&o.jsx("span",{className:"text-xs text-white/50",children:t})]}),o.jsx("button",{type:"button",role:"switch","aria-checked":r,disabled:i,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full
                    transition-colors duration-200 ease-in-out focus:outline-none
                    ${r?"bg-primary-500":"bg-surface-600"}
                    ${i?"cursor-not-allowed":""}`,onClick:a=>{a.stopPropagation(),i||n(!r)},children:o.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full
                      bg-white shadow-lg ring-0 transition duration-200 ease-in-out
                      ${r?"translate-x-5":"translate-x-0.5"}
                      mt-0.5`})})]}),tr=["#fef3c7","#fecaca","#bbf7d0","#bfdbfe","#e9d5ff","#fed7aa","#f5e6d3","#ffedd5"],je=({label:e,value:t,onChange:r,presets:n=tr,disabled:i=!1})=>{const[a,s]=f.useState(!1),[l,u]=f.useState(t),d=f.useRef(null),g=f.useRef(null),p=f.useRef(null),w=f.useRef(null),[v,y]=f.useState(0);f.useEffect(()=>{u(t);const c=N(t);y(c)},[t]);const N=c=>{const h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(!h)return 0;const x=parseInt(h[1],16)/255,E=parseInt(h[2],16)/255,k=parseInt(h[3],16)/255,S=Math.max(x,E,k),F=Math.min(x,E,k);let T=0;if(S!==F){const fe=S-F;switch(S){case x:T=((E-k)/fe+(E<k?6:0))/6;break;case E:T=((k-x)/fe+2)/6;break;case k:T=((x-E)/fe+4)/6;break}}return Math.round(T*360)},De=f.useCallback(()=>{const c=w.current;if(!c)return;const h=c.getContext("2d");if(!h)return;const x=c.width,E=c.height;for(let k=0;k<x;k++)for(let S=0;S<E;S++){const F=k/x*100,T=100-S/E*100;h.fillStyle=`hsl(${v}, ${F}%, ${T}%)`,h.fillRect(k,S,1,1)}},[v]);f.useEffect(()=>{a&&De()},[a,v,De]),f.useEffect(()=>{const c=h=>{const x=h.target;d.current&&!d.current.contains(x)&&s(!1)};if(a){const h=setTimeout(()=>{document.addEventListener("mousedown",c)},100);return()=>{clearTimeout(h),document.removeEventListener("mousedown",c)}}},[a]);const Fe=(c,h,x)=>{h/=100,x/=100;const E=h*Math.min(x,1-x),k=S=>{const F=(S+c/30)%12,T=x-E*Math.max(Math.min(F-3,9-F,1),-1);return Math.round(255*T).toString(16).padStart(2,"0")};return`#${k(0)}${k(8)}${k(4)}`},ae=c=>{u(c),r(c)},wt=c=>{c.preventDefault(),c.stopPropagation();const h=w.current;if(!h)return;const x=h.getBoundingClientRect(),E=c.clientX-x.left,k=c.clientY-x.top,S=Math.max(0,Math.min(100,E/x.width*100)),F=Math.max(0,Math.min(100,100-k/x.height*100)),T=Fe(v,S,F);ae(T)},bt=c=>{c.stopPropagation();const h=parseInt(c.target.value);y(h);const x=Fe(h,100,50);ae(x)},mt=(c,h)=>{c.preventDefault(),c.stopPropagation(),ae(h),y(N(h))},xt=c=>{c.stopPropagation();const h=c.target.value;u(h),/^#[0-9A-Fa-f]{6}$/.test(h)&&(r(h),y(N(h)))},vt=c=>{c.preventDefault(),c.stopPropagation(),p.current&&p.current.click()},yt=c=>{c.stopPropagation();const h=c.target.value;ae(h),y(N(h))},kt=c=>{c.preventDefault(),c.stopPropagation(),i||s(!a)},Ct=c=>{c.stopPropagation()};return o.jsxs("div",{ref:d,className:`relative ${i?"opacity-50":""}`,children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsx("label",{className:"text-sm font-medium text-white/90",children:e}),o.jsxs("button",{type:"button",disabled:i,onClick:kt,className:`flex items-center gap-2 px-2 py-1.5 rounded-lg bg-surface-800/50 
                     hover:bg-surface-700/50 transition-colors`,children:[o.jsx("div",{className:"w-6 h-6 rounded-md border-2 border-white/20 shadow-inner",style:{backgroundColor:l}}),o.jsx("span",{className:"text-xs font-mono text-white/60 uppercase",children:l})]})]}),a&&o.jsxs("div",{ref:g,className:`absolute right-0 top-full mt-2 p-3 rounded-xl bg-surface-800 
                        border border-white/10 shadow-xl z-50 animate-scale-in min-w-[220px]`,onClick:Ct,onMouseDown:c=>c.stopPropagation(),children:[o.jsx("div",{className:"mb-3",children:o.jsx("canvas",{ref:w,width:200,height:120,onClick:wt,onMouseDown:c=>c.stopPropagation(),className:"w-full h-[120px] rounded-lg cursor-crosshair border border-white/10"})}),o.jsx("div",{className:"mb-3",children:o.jsx("input",{type:"range",min:"0",max:"360",value:v,onChange:bt,onMouseDown:c=>c.stopPropagation(),className:"w-full h-3 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"}})}),o.jsx("div",{className:"grid grid-cols-8 gap-1 mb-3",children:n.map(c=>o.jsx("button",{type:"button",onClick:h=>mt(h,c),onMouseDown:h=>h.stopPropagation(),className:`w-5 h-5 rounded border transition-all hover:scale-110 cursor-pointer
                           ${l.toLowerCase()===c.toLowerCase()?"border-primary-500 ring-1 ring-primary-500/50":"border-white/20"}`,style:{backgroundColor:c},title:c},c))}),o.jsxs("div",{className:"flex gap-2 pt-2 border-t border-white/10",children:[o.jsx("input",{ref:p,type:"color",value:l,onChange:yt,onMouseDown:c=>c.stopPropagation(),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0"}),o.jsx("input",{type:"text",value:l,onChange:xt,onClick:vt,onMouseDown:c=>c.stopPropagation(),placeholder:"#000000",className:`flex-1 px-2 py-1 text-xs font-mono bg-surface-700 rounded-lg 
                         border border-white/10 text-white placeholder-white/30
                         focus:outline-none focus:border-primary-500 cursor-pointer`})]}),o.jsx("div",{className:"mt-3 pt-2 border-t border-white/10",children:o.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),s(!1)},className:`w-full py-2 rounded-lg bg-primary-600 hover:bg-primary-500 
                         text-white text-sm font-medium transition-colors`,children:"Done"})})]})]})},pe=({label:e,value:t,options:r,onChange:n,disabled:i=!1})=>o.jsxs("div",{className:`flex flex-col gap-2 ${i?"opacity-50":""}`,children:[o.jsx("label",{className:"text-sm font-medium text-white/90",children:e}),o.jsx("select",{value:t,onChange:a=>n(a.target.value),disabled:i,className:`w-full px-3 py-2 rounded-lg bg-surface-700/80 border border-white/10
                   text-white text-sm cursor-pointer
                   focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500/30
                   disabled:cursor-not-allowed appearance-none
                   bg-[url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E')]
                   bg-[length:8px] bg-[center_right_12px] bg-no-repeat`,children:r.map(a=>o.jsx("option",{value:a.value,className:"bg-surface-800",children:a.label},a.value))})]}),rr=[{value:"system-ui",label:"System Default"},{value:"OpenDyslexic",label:"OpenDyslexic"},{value:"Arial",label:"Arial"},{value:"Verdana",label:"Verdana"},{value:"Comic Sans MS",label:"Comic Sans"}],or=()=>{const{settings:e,updateTypography:t}=O(),{typography:r}=e;return o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[o.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})}),o.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Typography"})]}),o.jsx(pe,{label:"Font Family",value:r.fontFamily,options:rr,onChange:n=>t({fontFamily:n})}),o.jsx(j,{label:"Line Height",value:r.lineHeight,min:1,max:3,step:.1,onChange:n=>t({lineHeight:n})}),o.jsx(j,{label:"Letter Spacing",value:r.letterSpacing,min:0,max:10,step:.5,unit:"px",onChange:n=>t({letterSpacing:n})}),o.jsx(j,{label:"Word Spacing",value:r.wordSpacing,min:0,max:20,step:1,unit:"px",onChange:n=>t({wordSpacing:n})}),o.jsx(I,{label:"Bold Text",description:"Make all text bold for better visibility",checked:r.fontWeight==="bold",onChange:n=>t({fontWeight:n?"bold":"normal"})})]})},nr=[{value:"none",label:"None"},{value:"sepia",label:"Sepia (Warm)"},{value:"blue-light",label:"Blue Light Filter"},{value:"custom",label:"Custom Color"}],ar=()=>{const{settings:e,updateVisualAids:t}=O(),{visualAids:r}=e;return o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[o.jsxs("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),o.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Visual Aids"})]}),o.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[o.jsx(I,{label:"Reading Ruler",description:"A horizontal bar that follows your cursor",checked:r.readingRuler.enabled,onChange:n=>t({readingRuler:{enabled:n}})}),r.readingRuler.enabled&&o.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[o.jsx(j,{label:"Height",value:r.readingRuler.height,min:20,max:200,step:10,unit:"px",onChange:n=>t({readingRuler:{height:n}})}),o.jsx(j,{label:"Opacity",value:r.readingRuler.opacity,min:.1,max:1,step:.1,onChange:n=>t({readingRuler:{opacity:n}})}),o.jsx(je,{label:"Color",value:r.readingRuler.color,onChange:n=>t({readingRuler:{color:n}})})]})]}),o.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[o.jsx(I,{label:"Screen Tint",description:"Color overlay to reduce eye strain",checked:r.screenTint.enabled,onChange:n=>t({screenTint:{enabled:n}})}),r.screenTint.enabled&&o.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[o.jsx(pe,{label:"Preset",value:r.screenTint.preset,options:nr,onChange:n=>t({screenTint:{preset:n}})}),r.screenTint.preset==="custom"&&o.jsx(je,{label:"Custom Color",value:r.screenTint.customColor,onChange:n=>t({screenTint:{customColor:n}})}),o.jsx(j,{label:"Intensity",value:r.screenTint.intensity,min:10,max:80,step:5,unit:"%",onChange:n=>t({screenTint:{intensity:n}})})]})]}),o.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[o.jsx(I,{label:"Focus Mode",description:"Dims everything except the paragraph you're reading",checked:r.focusMode.enabled,onChange:n=>t({focusMode:{enabled:n}})}),r.focusMode.enabled&&o.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:o.jsx(j,{label:"Dim Amount",value:r.focusMode.dimOpacity,min:.3,max:.9,step:.1,onChange:n=>t({focusMode:{dimOpacity:n}})})})]}),o.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[o.jsx(I,{label:"Hand Conductor",description:"Control reading flow with hand gestures",checked:r.handConductor.enabled,onChange:n=>t({handConductor:{enabled:n}})}),r.handConductor.enabled&&o.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[o.jsx(j,{label:"Sensitivity",value:r.handConductor.conductingSensitivity,min:.1,max:2,step:.1,onChange:n=>t({handConductor:{conductingSensitivity:n}})}),o.jsx(I,{label:"Gesture Shortcuts",description:"Swipe to simplify, Vertical for tempo",checked:r.handConductor.gestureShortcutsEnabled,onChange:n=>t({handConductor:{gestureShortcutsEnabled:n}})}),o.jsx("p",{className:"text-xs text-white/50 italic",children:"Move hand vertically to set pace. Swipe horizontal to simplify."})]})]}),o.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[o.jsx(I,{label:"Hand Focus",description:"Point with your finger to focus (Hand Tracking)",checked:r.handFocus.enabled,onChange:n=>t({handFocus:{enabled:n}})}),r.handFocus.enabled&&o.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[o.jsx(j,{label:"Spotlight Radius",value:r.handFocus.spotlightRadius,min:40,max:150,step:5,unit:"px",onChange:n=>t({handFocus:{spotlightRadius:n}})}),o.jsx(j,{label:"Blur Amount",value:r.handFocus.blurAmount,min:2,max:15,step:1,unit:"px",onChange:n=>t({handFocus:{blurAmount:n}})}),o.jsx("p",{className:"text-xs text-white/50 italic",children:"Point with your index finger to control the focus area"})]})]})]})},ir=[{value:"Â·",label:"Middle Dot (Â·)"},{value:"-",label:"Hyphen (-)"},{value:" ",label:"Space"}],sr=()=>{const{settings:e,updateCognitive:t}=O(),{cognitive:r}=e;return o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[o.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),o.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Reading Assistance"})]}),o.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[o.jsx(I,{label:"Bionic Reading",description:"Bolds the first part of words to guide your eye",checked:r.bionicReading.enabled,onChange:n=>t({bionicReading:{enabled:n}})}),r.bionicReading.enabled&&o.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[o.jsx(j,{label:"Bold Percentage",value:r.bionicReading.boldPercentage,min:30,max:70,step:5,unit:"%",onChange:n=>t({bionicReading:{boldPercentage:n}})}),o.jsxs("p",{className:"text-xs text-white/50 leading-relaxed",children:["Example: ",o.jsx("strong",{className:"text-white/90",children:"Thi"}),"s is ",o.jsx("strong",{className:"text-white/90",children:"ho"}),"w ",o.jsx("strong",{className:"text-white/90",children:"bio"}),"nic ",o.jsx("strong",{className:"text-white/90",children:"read"}),"ing ",o.jsx("strong",{className:"text-white/90",children:"wor"}),"ks"]})]})]}),o.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[o.jsx(I,{label:"Syllable Splitter",description:"Splits words into syllables for easier reading",checked:r.syllableSplitter.enabled,onChange:n=>t({syllableSplitter:{enabled:n}})}),r.syllableSplitter.enabled&&o.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[o.jsx(pe,{label:"Separator",value:r.syllableSplitter.separator,options:ir,onChange:n=>t({syllableSplitter:{separator:n}})}),o.jsxs("p",{className:"text-xs text-white/50 leading-relaxed",children:["Example: el",r.syllableSplitter.separator,"e",r.syllableSplitter.separator,"phant, beau",r.syllableSplitter.separator,"ti",r.syllableSplitter.separator,"ful"]})]})]}),o.jsx("div",{className:"p-3 rounded-xl bg-primary-500/10 border border-primary-500/20",children:o.jsxs("p",{className:"text-xs text-primary-300 leading-relaxed",children:["ðŸ’¡ ",o.jsx("strong",{children:"Tip:"})," These features work best on article and blog content. Some dynamic websites may have limited support."]})})]})};let q=null,H=!1,le=[];const Me="lexilens-tts-highlight";let G=null;function Ze(){return q||(q=window.speechSynthesis),q}function lr(e){const t=Ze(),r=t.getVoices();if(r.length>0){e(r.filter(n=>n.lang.startsWith("en")));return}t.onvoiceschanged=()=>{e(t.getVoices().filter(n=>n.lang.startsWith("en")))}}function cr(e){G||(G=document.createElement("style"),G.id="lexilens-tts-styles",document.head.appendChild(G)),G.textContent=`
    .${Me} {
      background-color: ${e} !important;
      border-radius: 2px;
      transition: background-color 0.1s ease;
    }
  `}function Le(){le.forEach(e=>{e.classList.remove(Me)}),le=[]}function Qe(e,t,r){return new Promise((n,i)=>{const a=Ze();ne();const s=new SpeechSynthesisUtterance(e);if(s.rate=t.speed,s.pitch=1,s.volume=1,t.voiceURI){const u=a.getVoices().find(d=>d.voiceURI===t.voiceURI);u&&(s.voice=u)}H=!0,r&&t.highlightColor&&(cr(t.highlightColor),r.classList.add(Me),le.push(r)),s.onend=()=>{H=!1,Le(),n()},s.onerror=l=>{H=!1,Le(),l.error!=="canceled"?i(new Error(l.error)):n()},a.speak(s)})}function ne(){q&&q.cancel(),H=!1,Le()}function dr(){return H}let P=null;function ur(e){P||(P=t=>{var a;const r=t.target;if(r.closest(".lexilens-widget"))return;const n=r.closest("p, h1, h2, h3, h4, h5, h6, li, span, div");if(!n)return;const i=(a=n.textContent)==null?void 0:a.trim();if(i){if(le.includes(n)&&H){ne();return}Qe(i,e,n)}},document.addEventListener("click",P))}function be(){P&&(document.removeEventListener("click",P),P=null),ne()}const pr=()=>{const{settings:e,updateAudio:t}=O(),{audio:r}=e,[n,i]=f.useState([]),[a,s]=f.useState(!1);f.useEffect(()=>{lr(d=>{i(d),!r.voiceURI&&d.length>0&&t({voiceURI:d[0].voiceURI})})},[]),f.useEffect(()=>{const d=setInterval(()=>{s(dr())},100);return()=>clearInterval(d)},[]);const l=n.map(d=>({value:d.voiceURI,label:`${d.name} (${d.lang})`})),u=async()=>{if(a){ne();return}const d="LexiLens helps you read better by providing customizable tools for improved reading fluency.",g=new SpeechSynthesisUtterance(d);if(g.rate=r.speed,r.voiceURI){const p=n.find(w=>w.voiceURI===r.voiceURI);p&&(g.voice=p)}window.speechSynthesis.speak(g)};return o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[o.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),o.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Text-to-Speech"})]}),o.jsx(I,{label:"Click to Read",description:"Click any text to hear it spoken aloud",checked:r.clickToRead,onChange:d=>t({clickToRead:d})}),o.jsx(pe,{label:"Voice",value:r.voiceURI,options:l,onChange:d=>t({voiceURI:d})}),o.jsx(j,{label:"Speed",value:r.speed,min:.5,max:2,step:.1,unit:"x",onChange:d=>t({speed:d})}),o.jsx(je,{label:"Highlight Color",value:r.highlightColor,onChange:d=>t({highlightColor:d}),presets:["#fef08a","#a5f3fc","#c4b5fd","#fda4af","#86efac","#fed7aa"]}),o.jsx("button",{onClick:u,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl
                    font-medium text-sm transition-all
                    ${a?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-primary-500/20 text-primary-400 hover:bg-primary-500/30"}`,children:a?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),"Stop"]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Test Voice"]})}),o.jsx("div",{className:"p-3 rounded-xl bg-primary-500/10 border border-primary-500/20",children:o.jsxs("p",{className:"text-xs text-primary-300 leading-relaxed",children:["ðŸ’¡ ",o.jsx("strong",{children:"Tip:"}),' Select text and right-click to read it aloud, or enable "Click to Read" to click any paragraph.']})})]})},hr=[{id:"typography",label:"Text",icon:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})},{id:"visual",label:"Visual",icon:o.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})},{id:"cognitive",label:"Reading",icon:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})},{id:"audio",label:"Audio",icon:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}],fr=({onClose:e})=>{const{settings:t,toggleExtension:r,resetToDefaults:n}=O(),[i,a]=f.useState("typography"),s=()=>{switch(i){case"typography":return o.jsx(or,{});case"visual":return o.jsx(ar,{});case"cognitive":return o.jsx(sr,{});case"audio":return o.jsx(pr,{});default:return null}};return o.jsxs("div",{className:"w-[340px] max-h-[550px] flex flex-col rounded-2xl glass shadow-2xl overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-xl bg-gradient-to-br from-primary-400 to-accent-500 
                          flex items-center justify-center shadow-glow`,children:o.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-sm font-bold text-white",children:"LexiLens"}),o.jsx("p",{className:"text-xs text-white/50",children:"Reading Assistant"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:r,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all
                       ${t.enabled?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-surface-700 text-white/50 hover:bg-surface-600"}`,children:t.enabled?"ON":"OFF"}),o.jsx("button",{onClick:e,className:"p-1.5 rounded-lg text-white/50 hover:text-white hover:bg-white/10 transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),o.jsx("div",{className:"flex p-2 gap-1 border-b border-white/10 bg-surface-900/30",children:hr.map(l=>o.jsxs("button",{onClick:()=>a(l.id),className:`flex-1 flex items-center justify-center gap-1.5 px-2 py-2 rounded-lg
                        text-xs font-medium transition-all
                        ${i===l.id?"bg-primary-500/20 text-primary-400":"text-white/50 hover:text-white/80 hover:bg-white/5"}`,children:[l.icon,o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.id))}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 lexilens-scrollbar",children:t.enabled?s():o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 text-center py-8",children:[o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-surface-800 flex items-center justify-center",children:o.jsx("svg",{className:"w-8 h-8 text-white/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white/70 font-medium",children:"LexiLens is disabled"}),o.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Click the ON button above to enable"})]})]})}),o.jsxs("div",{className:"flex items-center justify-between p-3 border-t border-white/10 bg-surface-900/30",children:[o.jsx("button",{onClick:n,className:"text-xs text-white/40 hover:text-white/60 transition-colors",children:"Reset to defaults"}),o.jsx("span",{className:"text-xs text-white/30",children:"v1.0.0"})]})]})},gr=({onClick:e,isOpen:t})=>{const{settings:r}=O();return o.jsxs("button",{onClick:e,className:`group relative w-14 h-14 rounded-2xl shadow-lg transition-all duration-300
                  flex items-center justify-center
                  ${t?"bg-surface-800 rotate-90 scale-90":"bg-gradient-to-br from-primary-500 to-accent-600 hover:scale-105 hover:shadow-glow-lg"}
                  ${!r.enabled&&!t?"opacity-60":""}`,"aria-label":t?"Close LexiLens panel":"Open LexiLens panel",children:[o.jsx("div",{className:`transition-transform duration-300 ${t?"rotate-45":""}`,children:t?o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):o.jsx("svg",{className:"w-7 h-7 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})}),!t&&o.jsx("div",{className:`absolute -top-1 -right-1 w-4 h-4 rounded-full border-2 border-surface-900
                      transition-colors duration-300
                      ${r.enabled?"bg-green-500":"bg-surface-600"}`}),!t&&o.jsxs("div",{className:`absolute right-full mr-3 px-3 py-1.5 rounded-lg bg-surface-800 
                        text-white text-sm font-medium whitespace-nowrap
                        opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none
                        shadow-lg`,children:["LexiLens",o.jsx("div",{className:`absolute right-0 top-1/2 -translate-y-1/2 translate-x-full
                          border-8 border-transparent border-l-surface-800`})]}),!t&&o.jsx("div",{className:`absolute inset-0 rounded-2xl bg-white/10 opacity-0 
                        group-hover:opacity-100 group-active:opacity-20 transition-opacity`})]})},wr=new Set(["the","is","at","which","on","and","a","an","in","to","of","for","with","by","as","it","that","this","are","was","were","be","have","has","had","do","does","did","but","or","so","if","when","where","how","why","who","what","all","any","some","no","not","can","could","will","would","should","may","might","must","my","your","his","her","its","our","their","he","she","they","we","i","you"]);function br(e,t=.3){if(!e||e.length<50)return e;const r=/[^.!?]+[.!?]+/g,n=e.match(r);if(!n||n.length<=1)return e;const i=n.map(p=>p.trim()),a={};(e.toLowerCase().match(/\b\w+\b/g)||[]).forEach(p=>{!wr.has(p)&&p.length>2&&(a[p]=(a[p]||0)+1)});const l=Math.max(...Object.values(a),1);Object.keys(a).forEach(p=>{a[p]=a[p]/l});const u=i.map((p,w)=>{const v=p.toLowerCase().match(/\b\w+\b/g)||[];let y=0;return v.forEach(N=>{a[N]&&(y+=a[N])}),w===0&&(y*=1.2),w===i.length-1&&(y*=1.1),v.length<5&&(y*=.5),{text:p,score:y/(v.length||1),index:w}}),d=Math.max(1,Math.ceil(i.length*t));return[...u].sort((p,w)=>w.score-p.score).slice(0,d).sort((p,w)=>p.index-w.index).map(p=>p.text).join(" ")}const mr=({originalText:e,onClose:t})=>{const[r]=f.useState(()=>br(e)),[n,i]=f.useState(!1),[a,s]=f.useState(!1),l=()=>{navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),2e3)},u=async()=>{a?(ne(),s(!1)):(s(!0),await Qe(r,{speed:1,voiceURI:"",highlightColor:"#fef08a"},void 0),s(!1))};return o.jsxs("div",{className:"fixed inset-0 z-[2147483647] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm animate-pulse-soft",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-lg bg-surface-900/95 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl animate-scale-in overflow-hidden flex flex-col max-h-[80vh]",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-gradient-to-r from-primary-500/10 to-accent-500/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-accent-600 flex items-center justify-center shadow-lg shadow-primary-500/20",children:o.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Summary"}),o.jsx("p",{className:"text-xs text-white/50",children:"Key points from selection"})]})]}),o.jsx("button",{onClick:t,className:"p-2 rounded-lg text-white/40 hover:text-white hover:bg-white/10 transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[o.jsx("p",{className:"text-white/90 leading-relaxed text-base font-medium",children:r}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex justify-between items-center text-xs text-white/40 font-mono",children:[o.jsxs("span",{children:["Original: ",e.length," chars"]}),o.jsxs("span",{children:["Summary: ",r.length," chars (",Math.round(r.length/e.length*100),"%)"]})]})]}),o.jsxs("div",{className:"p-4 bg-surface-800/50 border-t border-white/5 flex gap-3",children:[o.jsx("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-surface-700/50 hover:bg-surface-700 text-white font-medium transition-all hover:scale-[1.02]",children:n?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o.jsx("span",{className:"text-green-400",children:"Copied!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4 text-white/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),o.jsx("span",{children:"Copy Text"})]})}),o.jsx("button",{onClick:u,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all hover:scale-[1.02] shadow-lg
              ${a?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-primary-500 hover:bg-primary-400 text-white shadow-primary-500/25"}`,children:a?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-4 h-4 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),o.jsx("span",{children:"Stop"})]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),o.jsx("span",{children:"Read Aloud"})]})})]})]})]})},Ne="lexilens-typography-styles",R={fontFamily:"--lexilens-font-family",lineHeight:"--lexilens-line-height",letterSpacing:"--lexilens-letter-spacing",wordSpacing:"--lexilens-word-spacing",fontWeight:"--lexilens-font-weight"},xr={OpenDyslexic:'"OpenDyslexic", "Comic Sans MS", Arial, sans-serif',Arial:"Arial, Helvetica, sans-serif",Verdana:"Verdana, Geneva, sans-serif","Comic Sans MS":'"Comic Sans MS", "Comic Sans", cursive, sans-serif',"system-ui":'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'};function vr(e){return`
    :root {
      ${R.fontFamily}: ${xr[e.fontFamily]};
      ${R.lineHeight}: ${e.lineHeight};
      ${R.letterSpacing}: ${e.letterSpacing}px;
      ${R.wordSpacing}: ${e.wordSpacing}px;
      ${R.fontWeight}: ${e.fontWeight};
    }

    /* Apply to all text elements with high specificity */
    html body,
    html body *:not(script):not(style):not(svg):not(path):not(.lexilens-widget):not(.lexilens-widget *) {
      font-family: var(${R.fontFamily}) !important;
      line-height: var(${R.lineHeight}) !important;
      letter-spacing: var(${R.letterSpacing}) !important;
      word-spacing: var(${R.wordSpacing}) !important;
      font-weight: var(${R.fontWeight}) !important;
    }

    /* Preserve icons and special fonts */
    html body [class*="icon"],
    html body [class*="Icon"],
    html body i[class*="fa"],
    html body .material-icons,
    html body svg,
    html body code,
    html body pre,
    html body kbd,
    html body samp {
      font-family: inherit !important;
      letter-spacing: normal !important;
      word-spacing: normal !important;
    }
  `}function yr(e){let t=document.getElementById(Ne);t||(t=document.createElement("style"),t.id=Ne,t.setAttribute("data-lexilens","typography"),document.head.appendChild(t)),t.textContent=vr(e)}function Oe(){const e=document.getElementById(Ne);e&&e.remove()}const kr="lexilens-reading-ruler";let b=null,He=0,B=null,Ie=!1;function Cr(e){const t=document.createElement("div");return t.id=kr,t.setAttribute("data-lexilens","reading-ruler"),Object.assign(t.style,{position:"fixed",left:"0",right:"0",height:`${e.height}px`,backgroundColor:e.color,opacity:String(e.opacity),pointerEvents:"none",zIndex:"2147483646",transform:"translateY(-50%)",transition:"top 0.05s ease-out, opacity 0.2s ease",boxShadow:"0 0 30px rgba(0, 0, 0, 0.1)",top:"-100px"}),t}function et(e){He=e.clientY,B&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{b&&(b.style.top=`${He}px`)})}function tt(){b&&(b.style.opacity="0")}function rt(){if(b&&Ie){const e=b.dataset.opacity;b.style.opacity=e||"0.4"}}function ot(e){if(b){nt(e);return}Ie=!0,b=Cr(e),b.dataset.opacity=String(e.opacity),document.body.appendChild(b),document.addEventListener("mousemove",et,{passive:!0}),document.addEventListener("mouseleave",tt),document.addEventListener("mouseenter",rt),requestAnimationFrame(()=>{b&&(b.style.opacity=String(e.opacity))})}function nt(e){if(!b){e.enabled&&ot(e);return}b.style.height=`${e.height}px`,b.style.backgroundColor=e.color,b.style.opacity=String(e.opacity),b.dataset.opacity=String(e.opacity)}function me(){Ie=!1,B&&(cancelAnimationFrame(B),B=null),document.removeEventListener("mousemove",et),document.removeEventListener("mouseleave",tt),document.removeEventListener("mouseenter",rt),b&&(b.style.opacity="0",setTimeout(()=>{b==null||b.remove(),b=null},200))}const he="lexilens-screen-tint",Er={none:"transparent",sepia:"#f5e6d3","blue-light":"#ffedd5",custom:""};function at(e){return e.preset==="custom"?e.customColor:Er[e.preset]}function Sr(e){const t=document.createElement("div");t.id=he,t.setAttribute("data-lexilens","screen-tint");const r=at(e);return Object.assign(t.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:r,opacity:String(e.intensity/100),pointerEvents:"none",zIndex:"2147483645",mixBlendMode:"multiply",transition:"opacity 0.3s ease, background-color 0.3s ease"}),t}function it(e){let t=document.getElementById(he);if(t){st(e);return}t=Sr(e),document.body.appendChild(t)}function st(e){const t=document.getElementById(he);if(!t){e.enabled&&e.preset!=="none"&&it(e);return}const r=at(e);t.style.backgroundColor=r,t.style.opacity=String(e.intensity/100)}function xe(){const e=document.getElementById(he);e&&(e.style.opacity="0",setTimeout(()=>{e.remove()},300))}const ce="lexilens-focus-mode-styles",Y="lexilens-focused",X="lexilens-dimmed";let Te=!1,$=null,W=null;const lt=["p","article","section","blockquote","li",".paragraph",'[role="article"]',"h1","h2","h3","h4","h5","h6"].join(", ");function ct(e){return`
    /* Focus mode dimming */
    .${X} {
      opacity: ${1-e} !important;
      transition: opacity 0.2s ease !important;
    }
    
    .${Y} {
      opacity: 1 !important;
      transition: opacity 0.2s ease !important;
      position: relative;
      z-index: 1;
    }
    
    /* Ensure the focused element stands out */
    .${Y}::before {
      content: '';
      position: absolute;
      top: -8px;
      left: -12px;
      right: -12px;
      bottom: -8px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      pointer-events: none;
      z-index: -1;
    }
  `}function jr(e){return e.closest(lt)}function dt(e){W&&window.clearTimeout(W),W=window.setTimeout(()=>{const t=e.target;if(!t)return;const r=jr(t);r!==$&&($&&($.classList.remove(Y),$.classList.add(X)),r?(r.classList.remove(X),r.classList.add(Y),$=r):$=null)},50)}function Lr(){document.querySelectorAll(lt).forEach(t=>{t.closest(".lexilens-widget")||t.classList.add(X)})}function Nr(){const e=document.querySelectorAll(`.${X}`),t=document.querySelectorAll(`.${Y}`);e.forEach(r=>r.classList.remove(X)),t.forEach(r=>r.classList.remove(Y))}function Tr(e){if(Te){ut(e);return}Te=!0;let t=document.getElementById(ce);t||(t=document.createElement("style"),t.id=ce,t.setAttribute("data-lexilens","focus-mode"),document.head.appendChild(t)),t.textContent=ct(e.dimOpacity),Lr(),document.addEventListener("mousemove",dt,{passive:!0})}function ut(e){const t=document.getElementById(ce);t&&(t.textContent=ct(e.dimOpacity))}function ve(){Te=!1,W&&(window.clearTimeout(W),W=null),document.removeEventListener("mousemove",dt),Nr(),$=null;const e=document.getElementById(ce);e&&e.remove()}const Re="lexilens-bionic-processed";let A=null,V=!1;function Rr(e,t){const r=e.length;if(r<1)return e;if(r===1)return`<b>${e}</b>`;let n=Math.ceil(r*(t/100));return n<1&&(n=1),r>10&&(n=Math.max(1,Math.floor(r*(t/100)))),`<b>${e.slice(0,n)}</b>${e.slice(n)}`}function Ar(e){A&&(cancelAnimationFrame(A),A=null);const t=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,{acceptNode:a=>{var u;const s=a.parentElement;if(!s)return NodeFilter.FILTER_REJECT;const l=s.tagName;return["SCRIPT","STYLE","NOSCRIPT","TEXTAREA","INPUT","CODE","PRE","SVG","IMG","CANVAS","VIDEO","AUDIO"].includes(l)||s.isContentEditable||s.closest("[data-lexilens]")||s.closest(".lexilens-widget")||s.closest("#lexilens-root")||s.classList.contains(Re)||!((u=a.nodeValue)!=null&&u.trim())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),r=[];for(;t.nextNode();)r.push(t.currentNode);console.log(`[LexiLens] Bionic Reading: Found ${r.length} text nodes`);let n=0;const i=()=>{if(!V){A=null;return}const a=performance.now();for(;n<r.length&&performance.now()-a<10;){const s=r[n++];if(!s.isConnected)continue;const u=(s.nodeValue||"").split(/(\s+)/),d=document.createDocumentFragment();let g=!1;u.forEach(p=>{if(!p.trim()){d.appendChild(document.createTextNode(p));return}if(/[a-zA-Z]/.test(p)){g=!0;const w=document.createElement("span");w.className=Re,w.innerHTML=Rr(p,e),d.appendChild(w)}else d.appendChild(document.createTextNode(p))}),g&&s.parentNode&&s.replaceWith(d)}n<r.length&&V?A=requestAnimationFrame(i):(A=null,console.log("[LexiLens] Bionic Reading: Processing complete"))};A=requestAnimationFrame(i)}function Mr(){A&&(cancelAnimationFrame(A),A=null);const e=document.querySelectorAll(`.${Re}`),t=new Set;e.forEach(r=>{r.parentElement&&t.add(r.parentElement);const n=r.textContent||"";r.replaceWith(document.createTextNode(n))}),t.forEach(r=>{try{r.normalize()}catch{}})}function Ir(e){V||(V=!0,console.log(`[LexiLens] Enabling Bionic Reading (${e.boldPercentage}% bold)`),setTimeout(()=>{V&&Ar(e.boldPercentage)},100))}function ye(){console.log("[LexiLens] Disabling Bionic Reading"),V=!1,Mr()}const de="data-lexilens-syllable",J="data-lexilens-syllable-original";let Ae=!1;const Dr="aeiouyAEIOUY";function z(e){return Dr.includes(e)}function Fr(e){if(e.length<=3)return[e];const t=[];let r="",n=0;for(;n<e.length;){const i=e[n];if(r+=i,n<e.length-2){const a=e[n+1],s=e[n+2];z(i)&&!z(a)&&z(s)?(t.push(r),r=""):(z(i)&&!z(a)&&!z(s)&&a===s||z(i)&&!z(a)&&!z(s)&&a!==s)&&(r+=a,t.push(r),r="",n++)}n++}return r&&(t.length>0&&r.length<=2&&!r.match(/[aeiouy]/i)?t[t.length-1]+=r:t.push(r)),t.filter(i=>i.length>0)}function zr(e,t){const r=e.textContent||"",n=document.createDocumentFragment(),i=/([a-zA-Z']+)|([^a-zA-Z']+)/g;let a;for(;(a=i.exec(r))!==null;){const s=a[1],l=a[2];if(s&&s.length>3){const u=Fr(s),d=document.createElement("span");d.setAttribute("data-lexilens-syllables",u.join(t)),d.textContent=u.join(t),d.style.letterSpacing="0.5px",n.appendChild(d)}else s?n.appendChild(document.createTextNode(s)):l&&n.appendChild(document.createTextNode(l))}return n}function pt(e){return!!(["SCRIPT","STYLE","NOSCRIPT","IFRAME","OBJECT","EMBED","SVG","CANVAS","CODE","PRE","KBD","INPUT","TEXTAREA"].includes(e.tagName)||e.hasAttribute(de)||e.hasAttribute("data-lexilens-syllables")||e.closest(".lexilens-widget")||e.getAttribute("contenteditable")==="true")}function Pe(e,t){const r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:a=>{var l;const s=a.parentElement;return!s||pt(s)||!((l=a.textContent)!=null&&l.trim())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),n=[];let i;for(;i=r.nextNode();)n.push(i);for(let a=n.length-1;a>=0;a--){const s=n[a],l=s.parentElement;if(!l||l.hasAttribute(de))continue;l.hasAttribute(J)||l.setAttribute(J,l.innerHTML);const u=zr(s,t);s.replaceWith(u),l.setAttribute(de,"true")}}function _r(e){if(Ae)return;Ae=!0,Pe(document.body,e.separator);let t=null;const r=new MutationObserver(n=>{const i=[];for(const a of n)for(const s of a.addedNodes)if(s.nodeType===Node.ELEMENT_NODE){const l=s;pt(l)||i.push(l)}i.length!==0&&(t&&window.clearTimeout(t),t=window.setTimeout(()=>{r.disconnect();try{i.forEach(a=>Pe(a,e.separator))}finally{r.observe(document.body,{childList:!0,subtree:!0}),t=null}},100))});r.observe(document.body,{childList:!0,subtree:!0}),window.__lexilensSyllableObserver=r}function ke(){Ae=!1;const e=window.__lexilensSyllableObserver;e&&(e.disconnect(),delete window.__lexilensSyllableObserver),document.querySelectorAll(`[${J}]`).forEach(r=>{const n=r.getAttribute(J);n&&(r.innerHTML=n),r.removeAttribute(de),r.removeAttribute(J)})}let K=!1,Be=0,We=0,Ce=0,ie=null;const $r="LEXILENS_HAND_DATA",Or="LEXILENS_HAND_CMD",Hr="LEXILENS_HAND_ACK",Pr=300,Br=500;let L={startX:0,startTime:0,isTracking:!1};function ht(e){if(e.data.type===$r){const{x:t,y:r,detected:n}=e.data.payload,i=Date.now();if(Ee(n,!0,!1),n&&typeof t=="number"&&typeof r=="number"){const a=(i-Ce)/1e3;if(a>0&&Ce!==0){const s=t-Be,l=r-We,d=Math.sqrt(s*s+l*l)/a;window.dispatchEvent(new CustomEvent("LEXILENS_HAND_VELOCITY",{detail:{velocity:d,x:t,y:r}})),Vr(t,i),Math.abs(l)>5&&window.dispatchEvent(new CustomEvent("LEXILENS_HAND_SCROLL",{detail:{deltaY:l}}))}Be=t,We=r,Ce=i}else L.isTracking=!1}else if(e.data.type===Hr)if(console.log("[LexiLens Conductor] Driver status:",e.data.status),e.data.status==="DRIVER_LOADED"){if(K){const t=chrome.runtime.getURL("mediapipe/");Z("START",{baseUrl:t}),re()}}else e.data.status==="STARTED"?(re(),Ee(!1,!0,!1)):e.data.status==="ERROR"&&(console.error("[LexiLens Conductor] Driver error:",e.data.message),Ee(!1,!1,!0))}function Z(e,t){window.postMessage({type:Or,command:e,value:t},"*")}function re(){ie&&(clearInterval(ie),ie=null)}function Wr(){const e="lexilens-mediapipe-script";if(document.getElementById(e))return;const t=document.createElement("script");t.id=e,t.src=chrome.runtime.getURL("mediapipe/hands.js"),document.head.appendChild(t),t.onload=()=>{console.log("[LexiLens Conductor] MediaPipe lib loaded");const r=document.createElement("script");r.src=chrome.runtime.getURL("hand-driver.js"),document.head.appendChild(r)}}function Vr(e,t){if(!L.isTracking)L.isTracking=!0,L.startX=e,L.startTime=t;else if(t-L.startTime>Br)L.isTracking=!0,L.startX=e,L.startTime=t;else{const r=e-L.startX;if(Math.abs(r)>Pr){const n=r>0?"RIGHT":"LEFT";console.log(`[LexiLens] Swipe ${n} Detected!`),window.dispatchEvent(new CustomEvent("LEXILENS_HAND_GESTURE",{detail:{type:"SWIPE",direction:n}})),L.isTracking=!1}}}function Ur(e){if(K)return;console.log("[LexiLens] Enabling Hand Conductor"),K=!0,Wr(),window.addEventListener("message",ht),Xr(),re();const t=chrome.runtime.getURL("mediapipe/");Z("START",{baseUrl:t}),ie=window.setInterval(()=>{if(!K){re();return}console.log("[LexiLens Conductor] Connecting to driver..."),Z("PING"),Z("START",{baseUrl:t})},1e3)}function Yr(){console.log("[LexiLens] Disabling Hand Conductor"),K=!1,window.removeEventListener("message",ht),Gr(),re(),Z("STOP")}let D=null,m=null;function Xr(){if(D)return;D=document.createElement("div"),D.id="lexilens-conductor-glow",D.style.cssText=`
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 2147483640;
    transition: box-shadow 0.1s ease-out; /* Faster transition */
  `,document.body.appendChild(D),m=document.createElement("div"),m.id="lexilens-conductor-status",m.innerText="Initializing...",m.style.cssText=`
    position: fixed;
    bottom: 20px; right: 20px;
    padding: 8px 12px;
    border-radius: 20px;
    background-color: rgba(15, 23, 42, 0.9);
    color: white;
    font-family: sans-serif;
    font-size: 12px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
    border: 1px solid rgba(255,255,255,0.1);
    z-index: 2147483650;
    pointer-events: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  `;const e=document.createElement("span");e.style.cssText=`
        width: 8px; height: 8px;
        border-radius: 50%;
        background-color: #ef4444;
        display: inline-block;
    `,m.prepend(e),document.body.appendChild(m),window.addEventListener("LEXILENS_HAND_VELOCITY",ft)}function Gr(){D&&(D.remove(),D=null),m&&(m.remove(),m=null),window.removeEventListener("LEXILENS_HAND_VELOCITY",ft)}function Ee(e,t=!0,r=!1){if(!m)return;const n=m.querySelector("span");r?(n.style.backgroundColor="#ef4444",n.style.boxShadow="none",m.childNodes[1].textContent=" Error",m.style.borderColor="#ef4444"):t?e?(n.style.backgroundColor="#22c55e",n.style.boxShadow="0 0 12px #22c55e",m.childNodes[1].textContent=" Active",m.style.borderColor="#22c55e"):(n.style.backgroundColor="#3b82f6",n.style.boxShadow="none",m.childNodes[1].textContent=" Raise Hand",m.style.borderColor="rgba(255,255,255,0.1)"):(n.style.backgroundColor="#f59e0b",n.style.boxShadow="none",m.childNodes[1].textContent=" Connecting...")}function ft(e){if(!D)return;const{velocity:t,x:r,y:n}=e.detail,i=Math.min(Math.pow(t,.7)*2,120);let a="",s="";if(t<100?(a="rgba(100, 255, 255, 0.15)",s="Steady"):t<800?(a="rgba(34, 197, 94, 0.15)",s="Flow State"):(a="rgba(239, 68, 68, 0.2)",s="Slow Down!"),D.style.boxShadow=`inset 0 0 ${i}px ${i/3}px ${a}`,m&&m.childNodes[1]){const l=m.querySelector("span");if(l&&l.style.backgroundColor==="rgb(34, 197, 94)"){const u=m.childNodes[1].textContent;u!==" Connecting..."&&u!==" Raise Hand"&&u!==" Error"&&(m.childNodes[1].textContent=` ${s}`)}}}let C=null,Se=!1,Q=!1,se=null;const qr="lexilens-hand-overlay",Jr="LEXILENS_HAND_DATA",Kr="LEXILENS_HAND_CMD",Zr="LEXILENS_HAND_ACK";function Qr(e){if(e.data.type===Jr&&C){const{x:t,y:r,detected:n}=e.data.payload;n&&typeof t=="number"&&typeof r=="number"?(C.style.setProperty("--hand-x",`${t}px`),C.style.setProperty("--hand-y",`${r}px`),C.style.opacity="1"):C.style.opacity="0.3"}else if(e.data.type===Zr)if(console.log("[LexiLens Content] Driver status:",e.data.status),e.data.status==="DRIVER_LOADED"){if(Q){const t=chrome.runtime.getURL("mediapipe/");ee("START",{baseUrl:t}),oe()}}else e.data.status==="STARTED"?oe():e.data.status==="ERROR"&&console.error("[LexiLens Content] Driver error:",e.data.message)}function ee(e,t){window.postMessage({type:Kr,command:e,value:t},"*")}function oe(){se&&(clearInterval(se),se=null)}function eo(){if(Se)return;const e="lexilens-mediapipe-script";if(document.getElementById(e)){Se=!0;return}const t=document.createElement("script");t.id=e,t.src=chrome.runtime.getURL("mediapipe/hands.js"),document.head.appendChild(t),t.onload=()=>{console.log("[LexiLens Content] MediaPipe lib loaded");const r=document.createElement("script");r.src=chrome.runtime.getURL("hand-driver.js"),document.head.appendChild(r)},t.onerror=r=>{console.error("[LexiLens Content] Failed to load MediaPipe library",r)},window.addEventListener("message",Qr),Se=!0}function to(e){const t=document.createElement("div");t.id=qr,t.setAttribute("data-lexilens","hand-overlay");const r=window.innerWidth/2,n=window.innerHeight/2;return t.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 2147483645;
    pointer-events: none;
    backdrop-filter: blur(${e.blurAmount||6}px);
    -webkit-backdrop-filter: blur(${e.blurAmount||6}px);
    --hand-x: ${r}px;
    --hand-y: ${n}px;
    --spotlight-radius: ${e.spotlightRadius}px;
    --feather: 60px;
    mask-image: radial-gradient(
      circle at var(--hand-x) var(--hand-y),
      transparent 0px,
      transparent var(--spotlight-radius),
      rgba(0,0,0,0.5) calc(var(--spotlight-radius) + var(--feather)),
      rgba(0,0,0,1) calc(var(--spotlight-radius) + var(--feather) + 80px)
    );
    -webkit-mask-image: radial-gradient(
      circle at var(--hand-x) var(--hand-y),
      transparent 0px,
      transparent var(--spotlight-radius),
      rgba(0,0,0,0.5) calc(var(--spotlight-radius) + var(--feather)),
      rgba(0,0,0,1) calc(var(--spotlight-radius) + var(--feather) + 80px)
    );
    opacity: 0;
    transition: opacity 0.3s ease;
  `,t}function ro(e){if(Q)return;console.log("[LexiLens Content] Enabling Hand Focus"),Q=!0,eo(),C?C.style.display="block":(C=to(e),document.documentElement.appendChild(C)),gt(e);const t=chrome.runtime.getURL("mediapipe/");ee("START",{baseUrl:t}),oe(),se=window.setInterval(()=>{if(!Q){oe();return}console.log("[LexiLens Content] Pinging driver..."),ee("PING"),ee("START",{baseUrl:t})},1e3)}function gt(e){C&&(C.style.setProperty("--spotlight-radius",`${e.spotlightRadius}px`),e.blurAmount&&(C.style.backdropFilter=`blur(${e.blurAmount}px)`,C.style.webkitBackdropFilter=`blur(${e.blurAmount}px)`))}function oo(){console.log("[LexiLens Content] Disabling Hand Focus"),Q=!1,oe(),C&&(C.style.display="none"),ee("STOP")}const no=()=>{const{settings:e,isLoading:t,initialize:r}=O(),[n,i]=f.useState(!1),[a,s]=f.useState(null);return f.useEffect(()=>{r()},[r]),f.useEffect(()=>{if(!t){if(!e.enabled){Oe(),me(),xe(),ve(),ye(),ke(),be();return}yr(e.typography),e.visualAids.readingRuler.enabled?ot(e.visualAids.readingRuler):me(),e.visualAids.screenTint.enabled&&e.visualAids.screenTint.preset!=="none"?it(e.visualAids.screenTint):xe(),e.visualAids.focusMode.enabled?Tr(e.visualAids.focusMode):ve(),e.cognitive.bionicReading.enabled?Ir(e.cognitive.bionicReading):ye(),e.cognitive.syllableSplitter.enabled?_r(e.cognitive.syllableSplitter):ke(),e.visualAids.handConductor.enabled?Ur(e.visualAids.handConductor):Yr(),e.visualAids.handFocus.enabled?ro(e.visualAids.handFocus):oo(),e.audio.clickToRead?ur(e.audio):be()}},[e,t]),f.useEffect(()=>{t||!e.enabled||nt(e.visualAids.readingRuler)},[e.visualAids.readingRuler,t,e.enabled]),f.useEffect(()=>{t||!e.enabled||st(e.visualAids.screenTint)},[e.visualAids.screenTint,t,e.enabled]),f.useEffect(()=>{t||!e.enabled||ut(e.visualAids.focusMode)},[e.visualAids.focusMode,t,e.enabled]),f.useEffect(()=>{t||!e.enabled||(e.visualAids.handConductor,void 0)},[e.visualAids.handConductor,t,e.enabled]),f.useEffect(()=>{t||!e.enabled||gt(e.visualAids.handFocus)},[e.visualAids.handFocus,t,e.enabled]),f.useEffect(()=>{if(!e.enabled||!e.visualAids.handConductor.enabled)return;const l=d=>{const{deltaY:g}=d.detail;window.scrollBy({top:g*2,behavior:"auto"})},u=d=>{const{direction:g}=d.detail;g==="RIGHT"?i(p=>!p):g==="LEFT"&&i(!1)};return window.addEventListener("LEXILENS_HAND_SCROLL",l),window.addEventListener("LEXILENS_HAND_GESTURE",u),()=>{window.removeEventListener("LEXILENS_HAND_SCROLL",l),window.removeEventListener("LEXILENS_HAND_GESTURE",u)}},[e.enabled,e.visualAids.handConductor.enabled]),f.useEffect(()=>{const l=u=>{u.type==="SUMMARIZE_TEXT"&&typeof u.payload=="string"&&(s(u.payload),i(!1))};return chrome.runtime.onMessage.addListener(l),()=>chrome.runtime.onMessage.removeListener(l)},[]),f.useEffect(()=>()=>{Oe(),me(),xe(),ve(),ye(),ke(),be()},[]),t?null:o.jsxs("div",{className:"fixed bottom-6 right-6 z-[2147483647] flex flex-col items-end gap-4 font-sans",children:[n&&o.jsx("div",{className:"animate-slide-up",children:o.jsx(fr,{onClose:()=>i(!1)})}),a&&o.jsx(mr,{originalText:a,onClose:()=>s(null)}),o.jsx(gr,{onClick:()=>i(!n),isOpen:n})]})},ao=`*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:OpenDyslexic,Comic Sans MS,Arial,sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.lexilens-scrollbar::-webkit-scrollbar{width:6px}.lexilens-scrollbar::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.lexilens-scrollbar::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.lexilens-scrollbar::-webkit-scrollbar-thumb:hover{background:#ffffff80}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.-right-1{right:-.25rem}.-top-1{top:-.25rem}.bottom-6{bottom:1.5rem}.right-0{right:0}.right-6{right:1.5rem}.right-8{right:2rem}.right-full{right:100%}.top-1\\/2{top:50%}.top-8{top:2rem}.top-full{top:100%}.isolate{isolation:isolate}.z-50{z-index:50}.z-\\[2147483647\\]{z-index:2147483647}.z-\\[2147483648\\]{z-index:2147483648}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mr-3{margin-right:.75rem}.mt-0\\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-1\\.5{height:.375rem}.h-10{height:2.5rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-\\[120px\\]{height:120px}.h-full{height:100%}.max-h-\\[550px\\]{max-height:550px}.max-h-\\[80vh\\]{max-height:80vh}.w-1\\.5{width:.375rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-3{width:.75rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-\\[340px\\]{width:340px}.w-full{width:100%}.min-w-\\[220px\\]{min-width:220px}.max-w-lg{max-width:32rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0\\.5{--tw-translate-x: .125rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-5{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes ping{75%,to{transform:scale(2);opacity:0}}.animate-ping{animation:ping 1s cubic-bezier(0,0,.2,1) infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes pulseSoft{0%,to{opacity:1}50%{opacity:.7}}.animate-pulse-soft{animation:pulseSoft 2s ease-in-out infinite}@keyframes scaleIn{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}.animate-scale-in{animation:scaleIn .2s ease-out}@keyframes slideUp{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}.animate-slide-up{animation:slideUp .3s ease-out}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-crosshair{cursor:crosshair}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-8{grid-template-columns:repeat(8,minmax(0,1fr))}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0\\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-8{border-width:8px}.border-b{border-bottom-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.border-primary-500{--tw-border-opacity: 1;border-color:rgb(14 165 233 / var(--tw-border-opacity, 1))}.border-primary-500\\/20{border-color:#0ea5e933}.border-primary-500\\/30{border-color:#0ea5e94d}.border-red-500\\/30{border-color:#ef44444d}.border-surface-900{--tw-border-opacity: 1;border-color:rgb(24 24 27 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\\/10{border-color:#ffffff1a}.border-white\\/20{border-color:#fff3}.border-white\\/5{border-color:#ffffff0d}.border-l-surface-800{--tw-border-opacity: 1;border-left-color:rgb(39 39 42 / var(--tw-border-opacity, 1))}.border-t-transparent{border-top-color:transparent}.bg-black\\/40{background-color:#0006}.bg-black\\/90{background-color:#000000e6}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-500\\/20{background-color:#22c55e33}.bg-primary-400{--tw-bg-opacity: 1;background-color:rgb(56 189 248 / var(--tw-bg-opacity, 1))}.bg-primary-500{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.bg-primary-500\\/10{background-color:#0ea5e91a}.bg-primary-500\\/20{background-color:#0ea5e933}.bg-primary-600{--tw-bg-opacity: 1;background-color:rgb(2 132 199 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\\/20{background-color:#ef444433}.bg-surface-600{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.bg-surface-700{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.bg-surface-700\\/50{background-color:#3f3f4680}.bg-surface-700\\/80{background-color:#3f3f46cc}.bg-surface-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.bg-surface-800\\/30{background-color:#27272a4d}.bg-surface-800\\/50{background-color:#27272a80}.bg-surface-900{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.bg-surface-900\\/30{background-color:#18181b4d}.bg-surface-900\\/95{background-color:#18181bf2}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/10{background-color:#ffffff1a}.bg-white\\/30{background-color:#ffffff4d}.bg-\\[url\\(\\'data\\:image\\/svg\\+xml\\;charset\\=US-ASCII\\,\\%3Csvg\\%20xmlns\\%3D\\%22http\\%3A\\%2F\\%2Fwww\\.w3\\.org\\%2F2000\\%2Fsvg\\%22\\%20width\\%3D\\%22292\\.4\\%22\\%20height\\%3D\\%22292\\.4\\%22\\%3E\\%3Cpath\\%20fill\\%3D\\%22\\%23ffffff\\%22\\%20d\\%3D\\%22M287\\%2069\\.4a17\\.6\\%2017\\.6\\%200\\%200\\%200-13-5\\.4H18\\.4c-5\\%200-9\\.3\\%201\\.8-12\\.9\\%205\\.4A17\\.6\\%2017\\.6\\%200\\%200\\%200\\%200\\%2082\\.2c0\\%205\\%201\\.8\\%209\\.3\\%205\\.4\\%2012\\.9l128\\%20127\\.9c3\\.6\\%203\\.6\\%207\\.8\\%205\\.4\\%2012\\.8\\%205\\.4s9\\.2-1\\.8\\%2012\\.8-5\\.4L287\\%2095c3\\.5-3\\.5\\%205\\.4-7\\.8\\%205\\.4-12\\.8\\%200-5-1\\.9-9\\.2-5\\.5-12\\.8z\\%22\\%2F\\%3E\\%3C\\%2Fsvg\\%3E\\'\\)\\]{background-image:url(data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E)}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-primary-400{--tw-gradient-from: #38bdf8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(56 189 248 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary-500{--tw-gradient-from: #0ea5e9 var(--tw-gradient-from-position);--tw-gradient-to: rgb(14 165 233 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary-500\\/10{--tw-gradient-from: rgb(14 165 233 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(14 165 233 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-accent-500{--tw-gradient-to: #d946ef var(--tw-gradient-to-position)}.to-accent-500\\/10{--tw-gradient-to: rgb(217 70 239 / .1) var(--tw-gradient-to-position)}.to-accent-600{--tw-gradient-to: #c026d3 var(--tw-gradient-to-position)}.bg-\\[length\\:8px\\]{background-size:8px}.bg-\\[center_right_12px\\]{background-position:center right 12px}.bg-no-repeat{background-repeat:no-repeat}.p-0{padding:0}.p-1\\.5{padding:.375rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pb-4{padding-bottom:1rem}.pl-2{padding-left:.5rem}.pt-0{padding-top:0}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:OpenDyslexic,Comic Sans MS,Arial,sans-serif}.text-2xl{font-size:1.5rem;line-height:2rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-relaxed{line-height:1.625}.tracking-tight{letter-spacing:-.025em}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-primary-300{--tw-text-opacity: 1;color:rgb(125 211 252 / var(--tw-text-opacity, 1))}.text-primary-400{--tw-text-opacity: 1;color:rgb(56 189 248 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\\/30{color:#ffffff4d}.text-white\\/40{color:#fff6}.text-white\\/50{color:#ffffff80}.text-white\\/60{color:#fff9}.text-white\\/70{color:#ffffffb3}.text-white\\/90{color:#ffffffe6}.placeholder-white\\/30::-moz-placeholder{color:#ffffff4d}.placeholder-white\\/30::placeholder{color:#ffffff4d}.opacity-0{opacity:0}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-75{opacity:.75}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-glow{--tw-shadow: 0 0 20px rgba(14, 165, 233, .3);--tw-shadow-colored: 0 0 20px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-primary-500\\/20{--tw-shadow-color: rgb(14 165 233 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary-500\\/25{--tw-shadow-color: rgb(14 165 233 / .25);--tw-shadow: var(--tw-shadow-colored)}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-primary-500\\/50{--tw-ring-color: rgb(14 165 233 / .5)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.sepia{--tw-sepia: sepia(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-xl{--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.glass{background:#1e1e28d9;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1)}@font-face{font-family:OpenDyslexic;src:url(https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/woff2/OpenDyslexic-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:OpenDyslexic;src:url(https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/woff2/OpenDyslexic-Bold.woff2) format("woff2");font-weight:700;font-style:normal;font-display:swap}html,body{font-family:OpenDyslexic,Comic Sans MS,Arial,sans-serif!important}*{font-family:inherit}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:#fff;cursor:pointer;border:2px solid rgba(0,0,0,.3);box-shadow:0 2px 4px #0000004d}input[type=range]::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:#fff;cursor:pointer;border:2px solid rgba(0,0,0,.3);box-shadow:0 2px 4px #0000004d}input[type=color]{-webkit-appearance:none;padding:0;border:none;border-radius:6px;cursor:pointer}input[type=color]::-webkit-color-swatch-wrapper{padding:0;border-radius:6px}input[type=color]::-webkit-color-swatch{border:2px solid rgba(255,255,255,.2);border-radius:6px}.hover\\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.02\\]:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:bg-green-500\\/30:hover{background-color:#22c55e4d}.hover\\:bg-primary-400:hover{--tw-bg-opacity: 1;background-color:rgb(56 189 248 / var(--tw-bg-opacity, 1))}.hover\\:bg-primary-500:hover{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.hover\\:bg-primary-500\\/30:hover{background-color:#0ea5e94d}.hover\\:bg-red-500\\/30:hover{background-color:#ef44444d}.hover\\:bg-surface-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.hover\\:bg-surface-700:hover{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.hover\\:bg-surface-700\\/50:hover{background-color:#3f3f4680}.hover\\:bg-surface-800\\/50:hover{background-color:#27272a80}.hover\\:bg-white\\/10:hover{background-color:#ffffff1a}.hover\\:bg-white\\/5:hover{background-color:#ffffff0d}.hover\\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\\:text-white\\/60:hover{color:#fff9}.hover\\:text-white\\/80:hover{color:#fffc}.hover\\:shadow-glow-lg:hover{--tw-shadow: 0 0 40px rgba(14, 165, 233, .4);--tw-shadow-colored: 0 0 40px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\\:border-primary-500:focus{--tw-border-opacity: 1;border-color:rgb(14 165 233 / var(--tw-border-opacity, 1))}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-primary-500\\/30:focus{--tw-ring-color: rgb(14 165 233 / .3)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.group:hover .group-hover\\:opacity-100{opacity:1}.group:active .group-active\\:opacity-20{opacity:.2}@media (min-width: 640px){.sm\\:inline{display:inline}}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:h-4::-webkit-slider-thumb{height:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:w-4::-webkit-slider-thumb{width:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:cursor-pointer::-webkit-slider-thumb{cursor:pointer}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:appearance-none::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:rounded-full::-webkit-slider-thumb{border-radius:9999px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:bg-primary-500::-webkit-slider-thumb{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:shadow-lg::-webkit-slider-thumb{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:shadow-primary-500\\/30::-webkit-slider-thumb{--tw-shadow-color: rgb(14 165 233 / .3);--tw-shadow: var(--tw-shadow-colored)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:transition-transform::-webkit-slider-thumb{-webkit-transition-property:transform;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:hover\\:scale-110:hover::-webkit-slider-thumb{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}`,Ve="lexilens-root";let te=null,M=null;function Ue(){if(document.getElementById(Ve)){console.log("[LexiLens] Already initialized");return}if(window.location.protocol==="chrome-extension:"||window.location.protocol==="chrome:"||window.location.protocol==="moz-extension:"||window.location.protocol==="about:"||window.location.hostname==="newtab"){console.log("[LexiLens] Skipping extension/special page");return}M=document.createElement("div"),M.id=Ve,M.className="lexilens-widget",M.setAttribute("data-lexilens","root"),Object.assign(M.style,{position:"fixed",top:"0",left:"0",width:"0",height:"0",overflow:"visible",zIndex:"2147483647",pointerEvents:"none"});const e=M.attachShadow({mode:"closed"}),t=document.createElement("style");t.textContent=ao,e.appendChild(t);const r=document.createElement("style");r.textContent=`
    :host {
      all: initial;
    }
    
    .widget-container {
      pointer-events: auto;
      font-family: 'OpenDyslexic', 'Comic Sans MS', Arial, sans-serif;
    }
    
    * {
      box-sizing: border-box;
      font-family: inherit;
    }
  `,e.appendChild(r);const n=document.createElement("div");n.className="widget-container",e.appendChild(n),document.body.appendChild(M),te=St(n),te.render(o.jsx(Ye.StrictMode,{children:o.jsx(no,{})})),console.log("[LexiLens] Initialized successfully")}function io(){te&&(te.unmount(),te=null),M&&(M.remove(),M=null)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ue):Ue();window.addEventListener("pagehide",io);
